<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<script>
		window.addEventListener('DOMContentLoaded', function () {
			render();
		})

	</script>

</head>

<body>
	<script>
			//Задача 1

			(() => {
				let text = document.createElement('textarea');
				let p = document.createElement('p');
				document.body.append(text, p);

				text.addEventListener('blur', function () {
					let array = text.value.split(',').join('').split(' ');
					p.textContent = `Введено ${array.length} слов`;

				});
			})();

		//Задача 2

		(() => {
			let text = document.createElement('textarea');
			let p = document.createElement('p');
			document.body.append(text, p);

			text.addEventListener('blur', function () {
				let array = text.value.split('');

				p.textContent = `Введено ${array.length} символов, включая пробелы`;

				for (let i = 0; i < array.length; i++) {
					if (array[i] == " ") {
						array.splice(i, 1);
					}
				}
				p.textContent += ` и ${array.length} символов, без пробелов`;
			});
		})();

		//Задача 4

		(() => {
			let text = document.createElement('textarea');
			let p = document.createElement('p');
			document.body.append(text, p);
			text.value = 'Раз, два, три, четыре';


			text.addEventListener('blur', function () {
				let array = text.value.split('');
				let filterArr = [];

				for (let elem of array) {
					if (filterArr.includes(elem)) {
						continue;
					} else {
						filterArr.push(elem);
					}
				}

				p.textContent = 'В тексте:';

				for (let elem of filterArr) {
					let arr = array.filter(item => item == elem);
					if (elem == ' ') {
						elem = 'пробел';
						p.textContent += `${((arr.length / array.length) * 100).toFixed(0)}% символа '${elem}'', `
					} else if (elem == ',') {
						elem = 'запятая';
						p.textContent += `${((arr.length / array.length) * 100).toFixed(0)}% символа '${elem}'', `
					} else {
						p.textContent += `${((arr.length / array.length) * 100).toFixed(0)}% буквы '${elem}'', `
					}

				}
			});
		})();

		//Задача 5

		(() => {

			function renderPage() {
				let text = document.createElement('textarea');
				text.classList.add('text');
				let p = document.createElement('p');
				p.classList.add('paragraph');
				text.value = 'Раз, два, три, четыре';

				for (let i = 0; i < 4; i++) {
					let label = document.createElement('label');
					let input = document.createElement('input');
					input.setAttribute("type", "checkbox");

					if (i == 0) {
						label.textContent = 'Кол-во слов';
						input.setAttribute('value', label.textContent);
					} else if (i == 1) {
						label.textContent = 'Кол-во символов';
						input.setAttribute('value', label.textContent);
					} else if (i == 2) {
						label.textContent = 'Кол-во символов без пробелов';
						input.setAttribute('value', label.textContent);
					} else if (i == 3) {
						label.textContent = '% символов с тексте';
						input.setAttribute('value', label.textContent);
					}

					label.append(input);
					document.body.append(label, input);

				}

				document.body.append(text, p);

				getCountWords();
				getCountSimbols();
				getCountNetSimbols();
				getPersentageSimbols();

			}

			function getDomElem() {
				let text = document.querySelector('.text');
				let p = document.querySelector('.paragraph');

				return {
					text,
					p
				};
			}

			function getCountWords() {
				let text = getDomElem().text;
				let p = getDomElem().p;

				let checkBox = document.querySelector('[value = "Кол-во слов"]');

				checkBox.addEventListener('change', function () {
					if (this.checked == true) {
						let array = text.value.split(',').join('').split(' ');
						p.innerHTML += `В тексте ${array.length} слов.</br>`;
					} else {
						p.innerHTML = '';
					}

				});

			}

			function getCountSimbols() {
				let text = getDomElem().text;
				let p = getDomElem().p;

				let checkBox = document.querySelector('[value = "Кол-во символов"]');

				checkBox.addEventListener('change', function () {
					if (this.checked == true) {
						let array = text.value.split('');
						p.innerHTML += `В тексте ${array.length} символов, включая пробелы. </br> `;
					} else {
						p.innerHTML = '';
					}

				});

			}

			function getCountNetSimbols() {
				let text = getDomElem().text;
				let p = getDomElem().p;

				let checkBox = document.querySelector('[value = "Кол-во символов без пробелов"]');

				checkBox.addEventListener('change', function () {
					if (this.checked == true) {
						let array = text.value.split('');

						for (let i = 0; i < array.length; i++) {
							if (array[i] == " ") {
								array.splice(i, 1);
							}
						}
						p.innerHTML += `В тексте ${array.length} символов, без пробелов.</br>`;
					} else {
						p.innerHTML = '';
					}

				});

			}

			function getPersentageSimbols() {

				let text = getDomElem().text;
				let p = getDomElem().p;

				let checkBox = document.querySelector('[value = "% символов с тексте"]');

				checkBox.addEventListener('change', function () {
					if (this.checked == true) {
						let array = text.value.split('');
						let filterArr = [];

						for (let elem of array) {
							if (filterArr.includes(elem)) {
								continue;
							} else {
								filterArr.push(elem);
							}
						}

						for (let elem of filterArr) {
							let arr = array.filter(item => item == elem);
							if (elem == ' ') {
								elem = 'пробел';
								p.innerHTML += `В тескте ${((arr.length / array.length) * 100).toFixed(0)}% составляют символы '${elem}',</br> `
							} else if (elem == ',') {
								elem = 'запятая';
								p.innerHTML += `В тексте ${((arr.length / array.length) * 100).toFixed(0)}% составляютсимволы '${elem}',</br> `
							} else {
								p.innerHTML += `В тексте ${((arr.length / array.length) * 100).toFixed(0)}% составляют буквы '${elem}',</br> `
							}
						}

					} else {
						p.innerHTML = '';
					}
				});

			}
			window.render = renderPage;

		})();

	</script>
</body>

</html>
